---
title: "V è¨€èªã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œã‚‹"
emoji: "ğŸ‘¾"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [vlang]
published: true
---

ã“ã‚“ã«ã¡ã¯ã€æœ€è¿‘ V è¨€èªã®ä»•æ§˜å¤‰æ›´ã«è¿½å¾“ã™ã‚‹ä½œæ¥­ã®ãŠã‹ã’ã§æš‡ã—ãªã„tkmã§ã™ã€‚

å°‘ã—å‰ã‹ã‚‰ [vdotenv](https://github.com/zztkm/vdotenv) ã¨ã„ã† V è¨€èªå‘ã‘ã® dotenv ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œã£ã¦ã„ã¦ã€å°‘ã—ã¯çŸ¥è¦‹ãŒæºœã¾ã£ã¦ããŸã®ã§ V è¨€èªã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é–‹ç™ºã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’æ›¸ããŸã„ã¨æ€ã„ã¾ã™ã€‚


# V è¨€èªã«ã¤ã„ã¦

[GitHub ãƒªãƒã‚¸ãƒˆãƒª](https://github.com/vlang/v)

V è¨€èªè‡ªä½“ã«ã¤ã„ã¦ã¯æœ¬è¨˜äº‹ã®æœ¬é¡Œã§ã¯ãªã„ã®ã§ç‰¹è¨˜ã—ã¾ã›ã‚“ãŒã€V è¨€èªã® Contributor ã®æ–¹ãŒ[é–‹ç™ºè€…ã‹ã‚‰è¦‹ãŸ V è¨€èªã¨ãã®(èª‡å¤§)åºƒå‘Šã«ã¤ã„ã¦](https://zenn.dev/zakuro9715/articles/vlang-from-contributor-perspective)ã¨ã„ã†è¨˜äº‹ã‚’æ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§å‚è€ƒã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚

åƒ•ã¯ã€ŒVã€ã¨ã„ã†åå‰ãŒã‹ã£ã“ã„ã„ã¨ã„ã†ç†ç”±ã‹ã‚‰ä½¿ã„å§‹ã‚ã¾ã—ãŸã€‚


# V è¨€èªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

V è¨€èªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãªã„æ–¹ã¯ https://github.com/vlang/v#installing-v-from-source ã‚’å‚è€ƒã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚

æ—¢ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã®æ–¹ã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¦ãã ã•ã„ã€‚

```shell
v up
```

v up ãŒå¤±æ•—ã™ã‚‹å ´åˆã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’è©¦ã—ã¦ãã ã•ã„ã€‚

:::details ã‚³ãƒãƒ³ãƒ‰
```shell
# Vã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒªãƒã‚¸ãƒˆãƒªã«ç§»å‹•
cd path/to/v

# ãƒ­ãƒ¼ã‚«ãƒ«ã® master ãƒ–ãƒ©ãƒ³ãƒã«ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ã®å¤‰æ›´ã‚’å–ã‚Šè¾¼ã‚€
git pull

# ãƒ“ãƒ«ãƒ‰ã™ã‚‹
make
```
:::

ã“ã‚Œã§ v up ãŒã—ã°ã‚‰ãå¤±æ•—ã—ãªããªã‚Šã¾ã™ã€‚

# V ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é–‹ç™ºãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«

ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã¯ä»¥ä¸‹ã®é †åºã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚

1. ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®åˆæœŸåŒ–
1. ä»–ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã‚‹é–¢æ•°ã‚’æŒã¤ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œæˆ
1. ä»–ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰å‘¼ã³å‡ºã—ã¦å®Ÿè¡Œã—ã¦ã¿ã‚‹
1. test ã‚’è¿½åŠ ã™ã‚‹

:::message
ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ V è¨€èªè‡ªèº«ã®æ§‹æ–‡ã‚„æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã›ã‚“ã€‚  
è¨€èªã«ã¤ã„ã¦å­¦ã³ãŸã„æ–¹ã¯[V Documentation](https://github.com/vlang/v/blob/master/doc/docs.md)ã‚’ã”è¦§ãã ã•ã„ã€‚
:::

## 1. ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®åˆæœŸåŒ–

ã¯ã˜ã‚ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®åˆæœŸåŒ–ã‚’è¡Œã„ã¾ã™ã€‚ V è¨€èªã«ã¯åˆæœŸåŒ–ç”¨ã®ã‚³ãƒãƒ³ãƒ‰ãŒã‚ã‚‹ã®ã§ä»Šå›ã¯ãã¡ã‚‰ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚

ã¾ãšã¯ã€ä»»æ„ã®å ´æ‰€ã«ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ç”¨ã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã—ã¾ã™ã€‚

```shell
mkdir tutorial-modules
cd tutorial-modules
```

æ¬¡ã« `v new [module name]`ã§ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é–‹ç™ºç”¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¾ã™ã€‚
```shell
v new mymodule
# å¯¾è©±å¼ã§å…¥åŠ›ã—ã¦ã„ãã¾ã™
Input your project description: my first v module
Input your project version: (0.0.0)
Input your project license: (MIT)
Initialising ...
Complete!
```

ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ã§ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚

```shell
ls -a mymodule/
.  ..  .git  .gitignore  mymodule.v  v.mod
```

å› ã¿ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«é–¢ã™ã‚‹ãƒ«ãƒ¼ãƒ«ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

> ãƒ» Module names should be short, under 10 characters.
> ãƒ» Module names must use snake_case.
> ãƒ» Circular imports are not allowed.
> ãƒ» You can have as many .v files in a module as you want.
> ãƒ» You can create modules anywhere.
> ãƒ» All modules are compiled statically into a single executable.

https://github.com/vlang/v/blob/master/doc/docs.md#modules ã‚ˆã‚Š


## 2. ä»–ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã‚‹é–¢æ•°ã‚’æŒã¤ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œæˆ

åˆæœŸåŒ–æ™‚ã«ä½œæˆã•ã‚ŒãŸ`mymodule.v`ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã¾ã™ã€‚

```v
// mymodule/mymodule.v
module mymodule

// To export a function we have to use `pub`
pub fn hello(name string) string {
	return 'Hello, $name!'
}
```

ã“ã®`hello`é–¢æ•°ã¯ string ã® name ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚Šã€å—ã‘å–ã£ãŸ name ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç”¨ã„ã¦è£œå®Œã•ã‚ŒãŸæ–‡å­—åˆ—ã‚’è¿”ã—ã¾ã™ã€‚

V è¨€èªã®æ–‡å­—åˆ—è£œé–“ã«ã¤ã„ã¦ã¯ [#string-interpolation](https://github.com/vlang/v/blob/master/doc/docs.md#string-interpolation)

## 3. ä»–ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰å‘¼ã³å‡ºã—ã¦å®Ÿè¡Œã—ã¦ã¿ã‚‹

tutorial-modules ç›´ä¸‹ã« main.v ã‚’ä½œæˆã—ã¦ä»¥ä¸‹ã®ã‚ˆã†ã«ç·¨é›†ã—ã¾ã™ã€‚

```v
// main.v
import mymodule

fn main() {
	message := mymodule.hello('tkm') 
	println(message)
}
```

å®Ÿè¡Œ:
```shell
v run main.v
hello tkm
```

## 4. test ã‚’è¿½åŠ ã™ã‚‹

test ã«é–¢ã™ã‚‹è©³ç´°ã¯ [#testing](https://github.com/vlang/v/blob/master/doc/docs.md#testing)
ãƒ•ã‚¡ã‚¤ãƒ«åãªã©ã®ãƒ«ãƒ¼ãƒ«ã¯ [#test-files](https://github.com/vlang/v/blob/master/doc/docs.md#test-files)
ã‹ã‚‰ç¢ºèªã§ãã¾ã™ã€‚

`mymodule_test.v` ã¨ã„ã†åå‰ã§ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚

```v
// mymodule/mymodule_test.v
module mymodule

fn test_hello() {
	assert hello('tkm') == 'hello tkm'
}
```

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ test ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```shell
# mymodule å†…ã®ãƒ†ã‚¹ãƒˆãŒå®Ÿè¡Œã•ã‚Œã¾ã™
v test mymodule
```

ãã®ä»–ã®å®Ÿè¡Œæ–¹æ³•ã«ã¤ã„ã¦ã¯ [#running-tests](https://github.com/vlang/v/blob/master/doc/docs.md#running-tests) ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚

# CHANGELOG

## 2021-07-06
- åˆå…¬é–‹
	- ã©ã†ã§ã‚‚è‰¯ã„ãŒç­†è€…ã®èª•ç”Ÿæ—¥ã§ã™